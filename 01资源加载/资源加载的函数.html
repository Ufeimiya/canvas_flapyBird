<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>FlappyBird</title>
</head>
<body>
<script>
    var res = [
        {name:"bird",path:"../res/birds.png"},
        {name:"land",path:"../res/land.png"},
        {name:"pipe1",path:"../res/pipe1.png"},
        {name:"pipe2",path:"../res/pipe2.png"},
        {name:"sky",path:"../res/sky.png"}
    ];
    // 用于加载资源
    function loadRes(res,callback){
        var imgs = {};
        var count = 0;
        // 每次有图片完成加载之后都执行这个函数，如果所有图片都加载完成则执行callback函数
        function loadHandler(){
            count++;
            if(count>=res.length){
                // 用回调函数来返回数据
                callback(imgs);
            }
        }
        for (var i=0;i<res.length;i++){
            // 遍历资源数组，创建img标签
            var img = new Image();
            img.src = res[i].path;
            img.addEventListener('load',function(){
                loadHandler()
            });
            imgs[res[i].name] = img;
        }
    }

    loadRes(res,function(imgs){
        console.log(imgs);
    })

</script>
</body>
</html>